---
title: é˜¿é‡Œé¢è¯•å®˜ğŸ‘¤ï¼šä¸ºä»€ä¹ˆè¦åˆ†åº“åˆ†è¡¨ï¼Ÿ
shortTitle: ä¸ºä»€ä¹ˆè¦åˆ†åº“åˆ†è¡¨ï¼Ÿ
author: è‹ä¸‰å‘€
category:
  - æ±‚èŒé¢è¯•
tag:
  - é¢è¯•é¢˜&å…«è‚¡æ–‡
head:
  - - meta
    - name: keywords
      content: Java,java,é¢è¯•é¢˜,å…«è‚¡æ–‡
---

## å‰è¨€

åœ¨é«˜å¹¶å‘ç³»ç»Ÿå½“ä¸­ï¼Œåˆ†åº“åˆ†è¡¨æ˜¯å¿…ä¸å¯å°‘çš„æŠ€æœ¯æ‰‹æ®µä¹‹ä¸€ï¼ŒåŒæ—¶ä¹Ÿæ˜¯BATç­‰å¤§å‚é¢è¯•æ—¶ï¼Œç»å¸¸è€ƒçš„çƒ­é—¨è€ƒé¢˜ã€‚

ä½ çŸ¥é“æˆ‘ä»¬ä¸ºä»€ä¹ˆè¦åšåˆ†åº“åˆ†è¡¨å—ï¼Ÿ

è¿™ä¸ªé—®é¢˜è¦ä»ä¸¤æ¡çº¿è¯´èµ·ï¼š`å‚ç›´æ–¹å‘` å’Œ `æ°´å¹³æ–¹å‘`ã€‚

## 1 å‚ç›´æ–¹å‘

`å‚ç›´æ–¹å‘`ä¸»è¦é’ˆå¯¹çš„æ˜¯`ä¸šåŠ¡`ï¼Œä¸‹é¢èŠèŠä¸šåŠ¡çš„å‘å±•è·Ÿåˆ†åº“åˆ†è¡¨æœ‰ä»€ä¹ˆå…³ç³»ã€‚

### 1.1 å•åº“

åœ¨ç³»ç»ŸåˆæœŸï¼Œä¸šåŠ¡åŠŸèƒ½ç›¸å¯¹æ¥è¯´æ¯”è¾ƒç®€å•ï¼Œç³»ç»Ÿæ¨¡å—è¾ƒå°‘ã€‚

ä¸ºäº†å¿«é€Ÿæ»¡è¶³è¿­ä»£éœ€æ±‚ï¼Œå‡å°‘ä¸€äº›ä¸å¿…è¦çš„ä¾èµ–ã€‚æ›´é‡è¦çš„æ˜¯å‡å°‘ç³»ç»Ÿçš„å¤æ‚åº¦ï¼Œä¿è¯å¼€å‘é€Ÿåº¦ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šä½¿ç”¨`å•åº“`æ¥ä¿å­˜æ•°æ®ã€‚

ç³»ç»ŸåˆæœŸçš„æ•°æ®åº“æ¶æ„å¦‚ä¸‹ï¼š

![](http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/nice-article/weixin-alemwsyyfkfb-965dbc52-1fad-4cf7-a6fc-f04ff445101f.jpg)

æ­¤æ—¶ï¼Œä½¿ç”¨çš„æ•°æ®åº“æ–¹æ¡ˆæ˜¯ï¼š`ä¸€ä¸ªæ•°æ®åº“`åŒ…å«`å¤šå¼ ä¸šåŠ¡è¡¨`ã€‚ç”¨æˆ·è¯»æ•°æ®è¯·æ±‚å’Œå†™æ•°æ®è¯·æ±‚ï¼Œéƒ½æ˜¯æ“ä½œçš„åŒä¸€ä¸ªæ•°æ®åº“ã€‚

### 1.2 åˆ†è¡¨

ç³»ç»Ÿä¸Šçº¿ä¹‹åï¼Œéšç€ä¸šåŠ¡çš„å‘å±•ï¼Œä¸æ–­çš„æ·»åŠ æ–°åŠŸèƒ½ã€‚å¯¼è‡´å•è¡¨ä¸­çš„å­—æ®µè¶Šæ¥è¶Šå¤šï¼Œå¼€å§‹å˜å¾—æœ‰ç‚¹ä¸å¤ªå¥½ç»´æŠ¤äº†ã€‚

ä¸€ä¸ªç”¨æˆ·è¡¨å°±åŒ…å«äº†å‡ åç”šè‡³ä¸Šç™¾ä¸ªå­—æ®µï¼Œç®¡ç†èµ·æ¥æœ‰ç‚¹æ··ä¹±ã€‚

è¿™æ—¶å€™è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ

ç­”ï¼š`åˆ†è¡¨`ã€‚

å°†`ç”¨æˆ·è¡¨`æ‹†åˆ†ä¸ºï¼š`ç”¨æˆ·åŸºæœ¬ä¿¡æ¯è¡¨` å’Œ `ç”¨æˆ·æ‰©å±•è¡¨`ã€‚

![](http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/nice-article/weixin-alemwsyyfkfb-32cbe5e1-b88b-4125-b990-8f901467fbb2.jpg)

ç”¨æˆ·åŸºæœ¬ä¿¡æ¯è¡¨ä¸­å­˜çš„æ˜¯ç”¨æˆ·æœ€ä¸»è¦çš„ä¿¡æ¯ï¼Œæ¯”å¦‚ï¼šç”¨æˆ·åã€å¯†ç ã€åˆ«åã€æ‰‹æœºå·ã€é‚®ç®±ã€å¹´é¾„ã€æ€§åˆ«ç­‰æ ¸å¿ƒæ•°æ®ã€‚

è¿™äº›ä¿¡æ¯è·Ÿç”¨æˆ·æ¯æ¯ç›¸å…³ï¼ŒæŸ¥è¯¢çš„é¢‘æ¬¡éå¸¸é«˜ã€‚

è€Œç”¨æˆ·æ‰©å±•è¡¨ä¸­å­˜çš„æ˜¯ç”¨æˆ·çš„æ‰©å±•ä¿¡æ¯ï¼Œæ¯”å¦‚ï¼šæ‰€å±å•ä½ã€æˆ·å£æ‰€åœ¨åœ°ã€æ‰€åœ¨åŸå¸‚ç­‰ç­‰ï¼Œéæ ¸å¿ƒæ•°æ®ã€‚

è¿™äº›ä¿¡æ¯åªæœ‰åœ¨ç‰¹å®šçš„ä¸šåŠ¡åœºæ™¯æ‰éœ€è¦æŸ¥è¯¢ï¼Œè€Œç»å¤§æ•°ä¸šåŠ¡åœºæ™¯æ˜¯ä¸éœ€è¦çš„ã€‚

æ‰€ä»¥é€šè¿‡åˆ†è¡¨æŠŠæ ¸å¿ƒæ•°æ®å’Œéæ ¸å¿ƒæ•°æ®åˆ†å¼€ï¼Œè®©è¡¨çš„ç»“æ„æ›´æ¸…æ™°ï¼ŒèŒè´£æ›´å•ä¸€ï¼Œæ›´ä¾¿äºç»´æŠ¤ã€‚

é™¤äº†æŒ‰å®é™…ä¸šåŠ¡åˆ†è¡¨ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜æœ‰ä¸€ä¸ªå¸¸ç”¨çš„åˆ†è¡¨åŸåˆ™æ˜¯ï¼šæŠŠè°ƒç”¨é¢‘æ¬¡é«˜çš„æ”¾åœ¨ä¸€å¼ è¡¨ï¼Œè°ƒç”¨é¢‘æ¬¡ä½çš„æ”¾åœ¨å¦ä¸€å¼ è¡¨ã€‚

æœ‰ä¸ªéå¸¸ç»å…¸çš„ä¾‹å­å°±æ˜¯ï¼šè®¢å•è¡¨å’Œè®¢å•è¯¦æƒ…è¡¨ã€‚

### 1.3 åˆ†åº“

ä¸çŸ¥ä¸è§‰ï¼Œç³»ç»Ÿå·²ç»ä¸Šçº¿äº†ä¸€å¹´å¤šçš„æ—¶é—´äº†ã€‚ç»å†äº†Nä¸ªè¿­ä»£çš„éœ€æ±‚å¼€å‘ï¼ŒåŠŸèƒ½å·²ç»éå¸¸å®Œå–„ã€‚

ç³»ç»ŸåŠŸèƒ½å®Œå–„ï¼Œæ„å‘³ç€ç³»ç»Ÿå„ç§å…³è”å…³ç³»ï¼Œé”™ç»¼å¤æ‚ã€‚

æ­¤æ—¶ï¼Œå¦‚æœä¸èµ¶å¿«æ¢³ç†ä¸šåŠ¡é€»è¾‘ï¼Œåé¢ä¼šå¸¦æ¥å¾ˆå¤šéšè—é—®é¢˜ï¼Œä¼šæŠŠè‡ªå·±å‘æ­»ã€‚

è¿™å°±éœ€è¦æŒ‰ä¸šåŠ¡åŠŸèƒ½ï¼Œåˆ’åˆ†ä¸åŒé¢†åŸŸäº†ã€‚æŠŠç›¸åŒé¢†åŸŸçš„è¡¨æ”¾åˆ°åŒä¸€ä¸ªæ•°æ®åº“ï¼Œä¸åŒé¢†åŸŸçš„è¡¨ï¼Œæ”¾åœ¨å¦å¤–çš„æ•°æ®åº“ã€‚

å…·ä½“æ‹†åˆ†è¿‡ç¨‹å¦‚ä¸‹ï¼š

![](http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/nice-article/weixin-alemwsyyfkfb-9cab165b-f2e0-4c80-9bd1-cc272a78429c.jpg)

å°†ç”¨æˆ·ã€äº§å“ã€ç‰©æµã€è®¢å•ç›¸å…³çš„è¡¨ï¼Œä»åŸæ¥ä¸€ä¸ªæ•°æ®åº“ä¸­ï¼Œæ‹†åˆ†æˆå•ç‹¬çš„ç”¨æˆ·åº“ã€äº§å“åº“ã€ç‰©æµåº“å’Œè®¢å•åº“ï¼Œä¸€å…±å››ä¸ªæ•°æ®åº“ã€‚

> åœ¨è¿™é‡Œä¸ºäº†çœ‹èµ·æ¥æ›´ç›´è§‚ï¼Œæ¯ä¸ªåº“æˆ‘åªç”»äº†ä¸€å¼ è¡¨ï¼Œå®é™…åœºæ™¯å¯èƒ½æœ‰å¤šå¼ è¡¨ã€‚

è¿™æ ·æŒ‰é¢†åŸŸæ‹†åˆ†ä¹‹åï¼Œæ¯ä¸ªé¢†åŸŸåªç”¨å…³æ³¨è‡ªå·±ç›¸å…³çš„è¡¨ï¼ŒèŒè´£æ›´å•ä¸€äº†ï¼Œä¸€ä¸‹å­å˜å¾—æ›´å¥½ç»´æŠ¤äº†ã€‚

### 1.4 åˆ†åº“åˆ†è¡¨

æœ‰æ—¶å€™æŒ‰ä¸šåŠ¡ï¼Œåªåˆ†åº“ï¼Œæˆ–è€…åªåˆ†è¡¨æ˜¯ä¸å¤Ÿçš„ã€‚æ¯”å¦‚ï¼šæœ‰äº›è´¢åŠ¡ç³»ç»Ÿï¼Œéœ€è¦æŒ‰æœˆä»½å’Œå¹´ä»½æ±‡æ€»ï¼Œæ‰€æœ‰ç”¨æˆ·çš„èµ„é‡‘ã€‚

è¿™å°±éœ€è¦åšï¼š`åˆ†åº“åˆ†è¡¨`äº†ã€‚

æ¯å¹´éƒ½æœ‰ä¸ªå•ç‹¬çš„æ•°æ®åº“ï¼Œæ¯ä¸ªæ•°æ®åº“ä¸­ï¼Œéƒ½æœ‰12å¼ è¡¨ï¼Œæ¯å¼ è¡¨å­˜å‚¨ä¸€ä¸ªæœˆçš„ç”¨æˆ·èµ„é‡‘æ•°æ®ã€‚

![](http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/nice-article/weixin-alemwsyyfkfb-38434e50-9dce-467f-a036-e75038d9f3f6.jpg)

è¿™æ ·åˆ†åº“åˆ†è¡¨ä¹‹åï¼Œå°±èƒ½éå¸¸é«˜æ•ˆçš„æŸ¥è¯¢å‡ºæŸä¸ªç”¨æˆ·æ¯ä¸ªæœˆï¼Œæˆ–è€…æ¯å¹´çš„èµ„é‡‘äº†ã€‚

æ­¤å¤–ï¼Œè¿˜æœ‰äº›æ¯”è¾ƒç‰¹æ®Šçš„éœ€æ±‚ï¼Œæ¯”å¦‚éœ€è¦æŒ‰ç…§åœ°åŸŸåˆ†åº“ï¼Œæ¯”å¦‚ï¼šåä¸­ã€ååŒ—ã€åå—ç­‰åŒºï¼Œæ¯ä¸ªåŒºéƒ½æœ‰ä¸€ä¸ªå•ç‹¬çš„æ•°æ®åº“ã€‚

ç”šè‡³æœ‰äº›æ¸¸æˆå¹³å°ï¼ŒæŒ‰æ¥å…¥çš„æ¸¸æˆå‚å•†æ¥åšåˆ†åº“åˆ†è¡¨ã€‚

## 2 æ°´å¹³æ–¹å‘

`æ°´åˆ†æ–¹å‘`ä¸»è¦é’ˆå¯¹çš„æ˜¯`æ•°æ®`ï¼Œä¸‹é¢èŠèŠæ•°æ®è·Ÿåˆ†åº“åˆ†è¡¨åˆæœ‰ä»€ä¹ˆå…³ç³»ã€‚

### 2.1 å•åº“

åœ¨ç³»ç»ŸåˆæœŸï¼Œç”±äºç”¨æˆ·éå¸¸å°‘ï¼Œæ‰€ä»¥ç³»ç»Ÿå¹¶å‘é‡å¾ˆå°ã€‚å¹¶ä¸”å­˜åœ¨è¡¨ä¸­çš„æ•°æ®é‡ä¹Ÿéå¸¸å°‘ã€‚

è¿™æ—¶çš„æ•°æ®åº“æ¶æ„å¦‚ä¸‹ï¼š

![](http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/nice-article/weixin-alemwsyyfkfb-965dbc52-1fad-4cf7-a6fc-f04ff445101f.jpg)

æ­¤æ—¶ï¼Œä½¿ç”¨çš„æ•°æ®åº“æ–¹æ¡ˆåŒæ ·æ˜¯ï¼š`ä¸€ä¸ªmasteræ•°æ®åº“`åŒ…å«`å¤šå¼ ä¸šåŠ¡è¡¨`ã€‚

ç”¨æˆ·è¯»æ•°æ®è¯·æ±‚å’Œå†™æ•°æ®è¯·æ±‚ï¼Œéƒ½æ˜¯æ“ä½œçš„åŒä¸€ä¸ªæ•°æ®åº“ï¼Œè¯¥æ–¹æ¡ˆæ¯”è¾ƒé€‚åˆäºå¹¶å‘é‡å¾ˆä½çš„ä¸šåŠ¡åœºæ™¯ã€‚

### 2.2 ä¸»ä»è¯»å†™åˆ†ç¦»

ç³»ç»Ÿä¸Šçº¿ä¸€æ®µæ—¶é—´åï¼Œç”¨æˆ·æ•°é‡å¢åŠ äº†ã€‚

æ­¤æ—¶ï¼Œä½ ä¼šå‘ç°ç”¨æˆ·çš„è¯·æ±‚å½“ä¸­ï¼Œè¯»æ•°æ®çš„è¯·æ±‚å æ®äº†å¤§éƒ¨åˆ†ï¼ŒçœŸæ­£å†™æ•°æ®çš„è¯·æ±‚å æ¯”å¾ˆå°‘ã€‚

ä¼—æ‰€å‘¨çŸ¥ï¼Œ`æ•°æ®åº“è¿æ¥æ˜¯æœ‰é™çš„`ï¼Œå®ƒæ˜¯éå¸¸å®è´µçš„èµ„æºã€‚è€Œæ¯æ¬¡æ•°æ®åº“çš„è¯»æˆ–å†™è¯·æ±‚ï¼Œéƒ½éœ€è¦å ç”¨è‡³å°‘ä¸€ä¸ªæ•°æ®åº“è¿æ¥ã€‚

å¦‚æœå†™æ•°æ®è¯·æ±‚éœ€è¦çš„æ•°æ®åº“è¿æ¥ï¼Œè¢«è¯»æ•°æ®è¯·æ±‚å ç”¨å®Œäº†ï¼Œä¸å°±å†™ä¸äº†æ•°æ®äº†ï¼Ÿ

è¿™æ ·é—®é¢˜å°±ä¸¥é‡äº†ã€‚

ä¸ºäº†è§£å†³è¯¥é—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦æŠŠ`è¯»åº“`å’Œ`å†™åº“`åˆ†å¼€ã€‚

äºæ˜¯ï¼Œå°±å‡ºç°äº†ä¸»ä»è¯»å†™åˆ†ç¦»æ¶æ„ï¼š

![](http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/nice-article/weixin-alemwsyyfkfb-e56c2d22-9aa2-4502-8d2a-f4416ce20db9.jpg)

è€ƒè™‘åˆšå¼€å§‹ç”¨æˆ·é‡è¿˜æ²¡é‚£ä¹ˆå¤§ï¼Œé€‰æ‹©çš„æ˜¯`ä¸€ä¸»ä¸€ä»`çš„æ¶æ„ï¼Œä¹Ÿå°±æ˜¯å¸¸è¯´çš„ä¸€ä¸ªmasterä¸€ä¸ªslaveã€‚

æ‰€æœ‰çš„å†™æ•°æ®è¯·æ±‚ï¼Œéƒ½æŒ‡å‘ä¸»åº“ã€‚ä¸€æ—¦ä¸»åº“å†™å®Œæ•°æ®ä¹‹åï¼Œç«‹é©¬å¼‚æ­¥åŒæ­¥ç»™ä»åº“ã€‚è¿™æ ·æ‰€æœ‰çš„è¯»æ•°æ®è¯·æ±‚ï¼Œå°±èƒ½åŠæ—¶ä»ä»åº“ä¸­è·å–åˆ°æ•°æ®äº†ï¼ˆé™¤éç½‘ç»œæœ‰å»¶è¿Ÿï¼‰ã€‚

è¯»å†™åˆ†ç¦»æ–¹æ¡ˆå¯ä»¥è§£å†³ä¸Šé¢æåˆ°çš„å•èŠ‚ç‚¹é—®é¢˜ï¼Œç›¸å¯¹äºå•åº“çš„æ–¹æ¡ˆï¼Œèƒ½å¤Ÿæ›´å¥½çš„ä¿è¯ç³»ç»Ÿçš„ç¨³å®šæ€§ã€‚

å› ä¸ºå¦‚æœä¸»åº“æŒ‚äº†ï¼Œå¯ä»¥å‡çº§ä»åº“ä¸ºä¸»åº“ï¼Œå°†æ‰€æœ‰è¯»å†™è¯·æ±‚éƒ½æŒ‡å‘æ–°ä¸»åº“ï¼Œç³»ç»Ÿåˆèƒ½æ­£å¸¸è¿è¡Œäº†ã€‚

> è¯»å†™åˆ†ç¦»æ–¹æ¡ˆå…¶å®ä¹Ÿæ˜¯åˆ†åº“çš„ä¸€ç§ï¼Œå®ƒç›¸å¯¹äºä¸ºæ•°æ®åšäº†å¤‡ä»½ï¼Œå®ƒå·²ç»æˆä¸ºäº†ç³»ç»ŸåˆæœŸçš„é¦–å…ˆæ–¹æ¡ˆã€‚

ä½†è¿™é‡Œæœ‰ä¸ªé—®é¢˜å°±æ˜¯ï¼šå¦‚æœç”¨æˆ·é‡ç¡®å®æœ‰äº›å¤§ï¼Œå¦‚æœmasteræŒ‚äº†ï¼Œå‡çº§slaveä¸ºmasterï¼Œå°†æ‰€æœ‰è¯»å†™è¯·æ±‚éƒ½æŒ‡å‘æ–°masterã€‚

ä½†æ­¤æ—¶ï¼Œå¦‚æœè¿™ä¸ªæ–°masteræ ¹æœ¬æ‰›ä¸ä½æ‰€æœ‰çš„è¯»å†™è¯·æ±‚ï¼Œè¯¥æ€ä¹ˆåŠï¼Ÿ

è¿™å°±éœ€è¦`ä¸€ä¸»å¤šä»`çš„æ¶æ„äº†ï¼š

![](http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/nice-article/weixin-alemwsyyfkfb-1fc49e99-76ac-4aea-8c3d-e438de2cdd1c.jpg)

ä¸Šå›¾ä¸­æˆ‘åˆ—çš„æ˜¯`ä¸€ä¸»ä¸¤ä»`ï¼Œå¦‚æœmasteræŒ‚äº†ï¼Œå¯ä»¥é€‰æ‹©ä»åº“1æˆ–ä»åº“2ä¸­çš„ä¸€ä¸ªï¼Œå‡çº§ä¸ºæ–°masterã€‚å‡å¦‚æˆ‘ä»¬åœ¨è¿™é‡Œå‡çº§ä»åº“1ä¸ºæ–°masterï¼Œåˆ™åŸæ¥çš„ä»åº“2å°±å˜æˆäº†æ–°masterçš„çš„slaveäº†ã€‚

è°ƒæ•´ä¹‹åçš„æ¶æ„å›¾å¦‚ä¸‹ï¼š

![](http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/nice-article/weixin-alemwsyyfkfb-bbf8495d-2338-4bcf-b8e3-cebaea4fac29.jpg)

è¿™æ ·å°±èƒ½è§£å†³ä¸Šé¢çš„é—®é¢˜äº†ã€‚

é™¤æ­¤ä¹‹å¤–ï¼Œå¦‚æœæŸ¥è¯¢è¯·æ±‚é‡å†å¢å¤§ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å°†æ¶æ„å‡çº§ä¸ºä¸€ä¸»ä¸‰ä»ã€ä¸€ä¸»å››ä»...ä¸€ä¸»Nä»ç­‰ã€‚

### 2.3 åˆ†åº“

ä¸Šé¢çš„è¯»å†™åˆ†ç¦»æ–¹æ¡ˆç¡®å®å¯ä»¥è§£å†³è¯»è¯·æ±‚å¤§äºå†™è¯·æ±‚æ—¶ï¼Œå¯¼è‡´masterèŠ‚ç‚¹æ‰›ä¸ä½çš„é—®é¢˜ã€‚ä½†å¦‚æœæŸä¸ªé¢†åŸŸï¼Œæ¯”å¦‚ï¼šç”¨æˆ·åº“ã€‚å¦‚æœæ³¨å†Œç”¨æˆ·çš„è¯·æ±‚é‡éå¸¸å¤§ï¼Œå³å†™è¯·æ±‚æœ¬èº«çš„è¯·æ±‚é‡å°±å¾ˆå¤§ï¼Œä¸€ä¸ªmasteråº“æ ¹æœ¬æ— æ³•æ‰¿å—ä½è¿™ä¹ˆå¤§çš„å‹åŠ›ã€‚

è¿™æ—¶è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ

ç­”ï¼šå»ºç«‹å¤šä¸ªç”¨æˆ·åº“ã€‚

ç”¨æˆ·åº“çš„æ‹†åˆ†è¿‡ç¨‹å¦‚ä¸‹ï¼š

![](http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/nice-article/weixin-alemwsyyfkfb-f2354590-0161-45e7-afb7-4ad07a3763fb.jpg)

åœ¨è¿™é‡Œæˆ‘å°†ç”¨æˆ·åº“æ‹†åˆ†æˆäº†ä¸‰ä¸ªåº“ï¼ˆçœŸå®åœºæ™¯ä¸ä¸€å®šæ˜¯è¿™æ ·çš„ï¼‰ï¼Œæ¯ä¸ªåº“çš„è¡¨ç»“æ„æ˜¯ä¸€æ¨¡ä¸€æ ·çš„ï¼Œåªæœ‰å­˜å‚¨çš„æ•°æ®ä¸ä¸€æ ·ã€‚



### 2.4 åˆ†è¡¨

ç”¨æˆ·è¯·æ±‚é‡ä¸Šæ¥äº†ï¼Œå¸¦æ¥çš„åŠ¿å¿…æ˜¯æ•°æ®é‡çš„æˆæœ¬ä¸Šå‡ã€‚å³ä½¿åšäº†åˆ†åº“ï¼Œä½†æœ‰å¯èƒ½å•ä¸ªåº“ï¼Œæ¯”å¦‚ï¼šç”¨æˆ·åº“ï¼Œå‡ºç°äº†5000ä¸‡çš„æ•°æ®ã€‚

æ ¹æ®ç»éªŒå€¼ï¼Œå•è¡¨çš„æ•°æ®é‡åº”è¯¥å°½é‡æ§åˆ¶åœ¨1000ä¸‡ä»¥å†…ï¼Œæ€§èƒ½æ˜¯æœ€ä½³çš„ã€‚å¦‚æœæœ‰å‡ åƒä¸‡çº§çš„æ•°æ®é‡ï¼Œç”¨å•è¡¨æ¥å­˜ï¼Œæ€§èƒ½ä¼šå˜å¾—å¾ˆå·®ã€‚

å¦‚æœæ•°æ®é‡å¤ªå¤§äº†ï¼Œéœ€è¦å»ºç«‹çš„ç´¢å¼•ä¹Ÿä¼šå¾ˆå¤§ï¼Œä»å°åˆ°å¤§æ£€ç´¢ä¸€æ¬¡æ•°æ®ï¼Œä¼šéå¸¸è€—æ—¶ï¼Œè€Œä¸”éå¸¸æ¶ˆè€—cpuèµ„æºã€‚

è¿™æ—¶è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ

ç­”ï¼š`åˆ†è¡¨`ï¼Œè¿™æ ·å¯ä»¥æ§åˆ¶æ¯å¼ è¡¨çš„æ•°æ®é‡ï¼Œå’Œç´¢å¼•å¤§å°ã€‚

è¡¨æ‹†åˆ†è¿‡ç¨‹å¦‚ä¸‹ï¼š

![](http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/nice-article/weixin-alemwsyyfkfb-8830dc2f-b088-4190-bc9a-a19bf55de99b.jpg)

æˆ‘åœ¨è¿™é‡Œå°†ç”¨æˆ·åº“ä¸­çš„ç”¨æˆ·è¡¨ï¼Œæ‹†åˆ†æˆäº†å››å¼ è¡¨ï¼ˆçœŸå®åœºæ™¯ä¸ä¸€å®šæ˜¯è¿™æ ·çš„ï¼‰ï¼Œæ¯å¼ è¡¨çš„è¡¨ç»“æ„æ˜¯ä¸€æ¨¡ä¸€æ ·çš„ï¼Œåªæ˜¯å­˜å‚¨çš„æ•°æ®ä¸ä¸€æ ·ã€‚

å¦‚æœä»¥åç”¨æˆ·æ•°æ®é‡è¶Šæ¥è¶Šå¤§ï¼Œåªéœ€å†å¤šåˆ†å‡ å¼ ç”¨æˆ·è¡¨å³å¯ã€‚

### 2.5 åˆ†åº“åˆ†è¡¨

å½“ç³»ç»Ÿå‘å±•åˆ°ä¸€å®šçš„é˜¶æ®µï¼Œç”¨æˆ·å¹¶å‘é‡å¤§ï¼Œè€Œä¸”éœ€è¦å­˜å‚¨çš„æ•°æ®é‡ä¹Ÿå¾ˆå¤šã€‚è¿™æ—¶è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ

ç­”ï¼šéœ€è¦åš`åˆ†åº“åˆ†è¡¨`ã€‚

å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![](http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/nice-article/weixin-alemwsyyfkfb-1cfacfbf-283a-4415-91da-c0c2616c2f0a.jpg)

å›¾ä¸­å°†ç”¨æˆ·åº“æ‹†åˆ†æˆäº†ä¸‰ä¸ªåº“ï¼Œæ¯ä¸ªåº“éƒ½åŒ…å«äº†å››å¼ ç”¨æˆ·è¡¨ã€‚

å¦‚æœæœ‰ç”¨æˆ·è¯·æ±‚è¿‡æ¥çš„æ—¶å€™ï¼Œå…ˆæ ¹æ®ç”¨æˆ·idè·¯ç”±åˆ°å…¶ä¸­ä¸€ä¸ªç”¨æˆ·åº“ï¼Œç„¶åå†å®šä½åˆ°æŸå¼ è¡¨ã€‚

è·¯ç”±çš„ç®—æ³•æŒºå¤šçš„ï¼š

*   `æ ¹æ®idå–æ¨¡`ï¼Œæ¯”å¦‚ï¼šid=7ï¼Œæœ‰4å¼ è¡¨ï¼Œåˆ™7%4=3ï¼Œæ¨¡ä¸º3ï¼Œè·¯ç”±åˆ°ç”¨æˆ·è¡¨3ã€‚
*   `ç»™idæŒ‡å®šä¸€ä¸ªåŒºé—´èŒƒå›´`ï¼Œæ¯”å¦‚ï¼šidçš„å€¼æ˜¯0-10ä¸‡ï¼Œåˆ™æ•°æ®å­˜åœ¨ç”¨æˆ·è¡¨0ï¼Œidçš„å€¼æ˜¯10-20ä¸‡ï¼Œåˆ™æ•°æ®å­˜åœ¨ç”¨æˆ·è¡¨1ã€‚
*   `ä¸€è‡´æ€§hashç®—æ³•`

è¿™ç¯‡æ–‡ç« å°±ä¸è¿‡å¤šä»‹ç»äº†ï¼Œåé¢ä¼šæœ‰æ–‡ç« ä¸“é—¨ä»‹ç»è¿™äº›è·¯ç”±ç®—æ³•çš„ã€‚

## 3 çœŸå®æ¡ˆä¾‹

æ¥ä¸‹æ¥ï¼ŒåºŸè¯ä¸å¤šè¯´ï¼Œç»™å¤§å®¶åˆ†äº«ä¸‰ä¸ªæˆ‘å‚ä¸è¿‡çš„åˆ†åº“åˆ†è¡¨é¡¹ç›®ç»å†ï¼Œç»™æœ‰éœ€è¦çš„æœ‹å‹ä¸€ä¸ªå‚è€ƒã€‚

### 3.1 åˆ†åº“

æˆ‘ä¹‹å‰å¾…è¿‡ä¸€å®¶å…¬å¸ï¼Œæˆ‘ä»¬å›¢é˜Ÿæ˜¯åšæ¸¸æˆè¿è¥çš„ï¼Œæˆ‘ä»¬å…¬å¸æä¾›å¹³å°ï¼Œæ¸¸æˆå‚å•†æ¥å…¥æˆ‘ä»¬å¹³å°ï¼Œæ¨å¹¿ä»–ä»¬çš„æ¸¸æˆã€‚

æ¸¸æˆç©å®¶é€šè¿‡æˆ‘ä»¬å¹³å°ç™»å½•ï¼ŒæˆåŠŸä¹‹åè·³è½¬åˆ°æ¸¸æˆå‚å•†çš„æŒ‡å®šæ¸¸æˆé¡µé¢ï¼Œè¯¥ç©å®¶å°±èƒ½æ­£å¸¸ç©æ¸¸æˆäº†ï¼Œè¿˜å¯ä»¥å……å€¼æ¸¸æˆå¸ã€‚

è¿™å°±éœ€è¦å»ºç«‹æˆ‘ä»¬çš„è´¦å·ä½“ç³»å’Œæ¸¸æˆå‚å•†çš„è´¦å·çš„æ˜ å°„å…³ç³»ï¼Œæ¸¸æˆç©å®¶é€šè¿‡ç™»å½•æˆ‘ä»¬å¹³å°çš„æ¸¸æˆè´¦å·ï¼ŒæˆåŠŸä¹‹åè½¬æ¢æˆæ¸¸æˆå‚å•†è‡ªå·±å¹³å°çš„è´¦å·ã€‚

è¿™é‡Œæœ‰ä¸¤ä¸ªé—®é¢˜ï¼š

1.  æ¯ä¸ªæ¸¸æˆå‚å•†çš„æ¥å…¥æ–¹å¼å¯èƒ½éƒ½ä¸ä¸€æ ·ï¼Œè´¦å·ä½“ç³»æ˜ å°„å…³ç³»ä¹Ÿæœ‰å·®å¼‚ã€‚
2.  ç”¨æˆ·éƒ½ä»æˆ‘ä»¬å¹³å°ç™»å½•ï¼ŒæˆåŠŸä¹‹åè·³è½¬åˆ°æ¸¸æˆå‚å•†çš„æ¸¸æˆé¡µé¢ã€‚å½“æ—¶æœ‰Nä¸ªæ¸¸æˆå‚å•†æ¥å…¥äº†ï¼Œæ´»è·ƒçš„æ¸¸æˆç©å®¶æ¯”è¾ƒå¤šï¼Œç™»å½•æ¥å£çš„å¹¶å‘é‡ä¸å®¹å°è§‘ã€‚

ä¸ºäº†è§£å†³è¿™ä¸¤ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å½“æ—¶é‡‡ç”¨çš„æ–¹æ¡ˆæ˜¯ï¼š`åˆ†åº“`ã€‚å³é’ˆå¯¹æ¯ä¸€ä¸ªæ¸¸æˆéƒ½å•ç‹¬å»ºä¸€ä¸ªæ•°æ®åº“ï¼Œæ•°æ®åº“ä¸­çš„è¡¨ç»“æ„å…è®¸å­˜åœ¨å·®å¼‚ã€‚

![](http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/nice-article/weixin-alemwsyyfkfb-f9f55b53-0465-48d1-9715-241129fe7833.jpg)

æˆ‘ä»¬å½“æ—¶æ²¡æœ‰è¿›ä¸€æ­¥åˆ†è¡¨ï¼Œæ˜¯å› ä¸ºå½“æ—¶è€ƒè™‘æ¯ç§æ¸¸æˆçš„ç”¨æˆ·é‡ï¼Œè¿˜æ²¡åˆ°å¤§åˆ°ç¦»è°±çš„åœ°æ­¥ã€‚ä¸åƒç‹è€…è£è€€è¿™ç§ç°è±¡çº§çš„æ¸¸æˆï¼Œæœ‰ä¸Šäº¿çš„ç©å®¶ã€‚

å…¶ä¸­æœ‰ä¸ªæ¯”è¾ƒå…³é”®çš„åœ°æ–¹æ˜¯ï¼šç™»å½•æ¥å£ä¸­éœ€è¦ä¼ å…¥æ¸¸æˆidå­—æ®µï¼Œé€šè¿‡è¯¥å­—æ®µï¼Œç³»ç»Ÿå°±çŸ¥é“è¦æ“ä½œå“ªä¸ªåº“ï¼Œå› ä¸ºåº“åä¸­å°±åŒ…å«äº†æ¸¸æˆidçš„ä¿¡æ¯ã€‚

### 3.2 åˆ†è¡¨

è¿˜æ˜¯åœ¨é‚£å®¶æ¸¸æˆå¹³å°å…¬å¸ï¼Œæˆ‘ä»¬è¿˜æœ‰å¦å¤–ä¸€ä¸ªä¸šåŠ¡å°±æ˜¯ï¼š`é‡‘é’»ä¼šå‘˜`ã€‚

è¯´ç™½äº†å°±æ˜¯æ‰“é€ äº†ä¸€å¥—è·Ÿæ¸¸æˆç›¸å…³çš„ä¼šå‘˜ä½“ç³»ï¼Œä¸ºäº†ä¿æŒç”¨æˆ·çš„æ´»è·ƒåº¦ï¼Œå¼€é€šä¼šå‘˜æœ‰å¾ˆå¤šç¦åˆ©ï¼Œæ¯”å¦‚ï¼šé€æ¸¸æˆå¸ã€å……å€¼æœ‰æŠ˜æ‰£ã€ç§¯åˆ†å…‘æ¢ã€æŠ½å¥–ã€ä¸“å±å®¢æœç­‰ç­‰ã€‚

åœ¨è¿™å¥—ä¼šå‘˜ä½“ç³»å½“ä¸­ï¼Œæœ‰ä¸ªéå¸¸é‡è¦çš„åŠŸèƒ½å°±æ˜¯ï¼š`ç§¯åˆ†`ã€‚

ç”¨æˆ·æœ‰å¾ˆå¤šç§é€”å¾„å¯ä»¥è·å–ç§¯åˆ†ï¼Œæ¯”å¦‚ï¼šç­¾åˆ°ã€å……å€¼ã€ç©æ¸¸æˆã€æŠ½å¥–ã€æ¨å¹¿ã€å‚åŠ æ´»åŠ¨ç­‰ç­‰ã€‚

ç§¯åˆ†ç”¨ä»€ä¹ˆç”¨é€”å‘¢ï¼Ÿ

1.  é€€æ¢å®ç‰©ç¤¼ç‰©
2.  å…‘æ¢æ¸¸æˆå¸
3.  æŠ½å¥–

è¯´äº†è¿™ä¹ˆå¤šï¼Œå…¶å®å°±æ˜¯æƒ³è¯´ï¼Œä¸€ä¸ªç”¨æˆ·ä¸€å¤©å½“ä¸­ï¼Œè·å–ç§¯åˆ†æˆ–æ¶ˆè´¹ç§¯åˆ†éƒ½å¯èƒ½æœ‰å¾ˆå¤šæ¬¡ï¼Œé‚£ä¹ˆï¼Œä¸€ä¸ªç”¨æˆ·ä¸€å¤©å°±å¯èƒ½ä¼šäº§ç”Ÿå‡ åæ¡è®°å½•ã€‚

å¦‚æœç”¨æˆ·å¤šäº†çš„è¯ï¼Œç§¯åˆ†ç›¸å…³çš„æ•°æ®é‡å…¶å®æŒºæƒŠäººçš„ã€‚

æˆ‘ä»¬å½“æ—¶è€ƒè™‘äº†ï¼Œæ°´å¹³æ–¹å‘çš„æ•°æ®é‡å¯èƒ½ä¼šå¾ˆå¤§ï¼Œä½†æ˜¯ç”¨æˆ·å¹¶å‘é‡å¹¶ä¸å¤§ï¼Œä¸åƒç™»å½•æ¥å£é‚£æ ·ã€‚

æ‰€ä»¥é‡‡ç”¨çš„æ–¹æ¡ˆæ˜¯ï¼š`åˆ†è¡¨`ã€‚

å½“æ—¶ä½¿ç”¨ä¸€ä¸ªç§¯åˆ†æ•°æ®åº“å°±å¤Ÿäº†ï¼Œä½†æ˜¯åˆ†äº†128å¼ è¡¨ã€‚ç„¶åæ ¹æ®ç”¨æˆ·idï¼Œè¿›è¡Œhashé™¤ä»¥128å–æ¨¡ã€‚

![](http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/nice-article/weixin-alemwsyyfkfb-884b58a4-3009-4056-904d-cd235db41aa6.jpg)

> éœ€è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯ï¼Œåˆ†è¡¨çš„æ•°é‡æœ€å¥½æ˜¯2çš„å¹‚æ¬¡æ–¹ï¼Œæ–¹ä¾¿ä»¥åæ‰©å®¹ã€‚

### 3.3 åˆ†åº“åˆ†è¡¨

åæ¥æˆ‘å»äº†ä¸€å®¶ä»äº‹é¤é¥®è½¯ä»¶å¼€å‘çš„å…¬å¸ã€‚è¿™ä¸ªå…¬å¸æœ‰ä¸ªç‰¹ç‚¹æ˜¯åœ¨æ¯å¤©çš„ä¸­åˆå’Œæ™šä¸Šçš„å°±é¤é«˜å³°æœŸï¼Œç”¨æˆ·çš„å¹¶å‘é‡å¾ˆå¤§ã€‚

ç”¨æˆ·åƒé¥­å‰éœ€è¦é€šè¿‡æˆ‘ä»¬ç³»ç»Ÿç‚¹é¤ï¼Œç„¶åä¸‹å•ï¼Œç„¶åç»“è´¦ã€‚å½“æ—¶ç‚¹é¤å’Œä¸‹å•çš„å¹¶å‘é‡æŒºå¤§çš„ã€‚

é¤å…å¯èƒ½ä¼šæœ‰å¾ˆå¤šäººï¼Œæ¯ä¸ªäººéƒ½å¯èƒ½ä¸‹å¤šä¸ªè®¢å•ã€‚è¿™æ ·å°±ä¼šå¯¼è‡´ç”¨æˆ·çš„å¹¶å‘é‡é«˜ï¼Œå¹¶ä¸”æ•°æ®é‡ä¹Ÿå¾ˆå¤§ã€‚

æ‰€ä»¥ï¼Œç»¼åˆè€ƒè™‘äº†ä¸€ä¸‹ï¼Œå½“æ—¶æˆ‘ä»¬é‡‡ç”¨çš„æŠ€æœ¯æ–¹æ¡ˆæ˜¯ï¼š`åˆ†åº“åˆ†è¡¨`ã€‚

ç»è¿‡è°ƒç ”ä¹‹åï¼Œè§‰å¾—ä½¿ç”¨äº†å½“å½“ç½‘å¼€æºçš„åŸºäºjdbcçš„ä¸­é—´ä»¶æ¡†æ¶ï¼š`sharding-jdbc`ã€‚

å½“æ—¶åˆ†äº†4ä¸ªåº“ï¼Œæ¯ä¸ªåº“æœ‰32å¼ è¡¨ã€‚

![](http://cdn.tobebetterjavaer.com/tobebetterjavaer/images/nice-article/weixin-alemwsyyfkfb-ed3d9006-7dd5-4f90-a566-8874020df4ea.jpg)

## 4 æ€»ç»“

ä¸Šé¢ä¸»è¦ä»ï¼šå‚ç›´å’Œæ°´å¹³ï¼Œä¸¤ä¸ªæ–¹å‘ä»‹ç»äº†æˆ‘ä»¬çš„ç³»ç»Ÿä¸ºä»€ä¹ˆè¦åˆ†åº“åˆ†è¡¨ã€‚

è¯´å®è¯å‚ç›´æ–¹å‘ï¼ˆå³ä¸šåŠ¡æ–¹å‘ï¼‰æ›´ç®€å•ã€‚

åœ¨æ°´å¹³æ–¹å‘ï¼ˆå³æ•°æ®æ–¹å‘ï¼‰ä¸Šï¼Œ`åˆ†åº“`å’Œ`åˆ†è¡¨`çš„ä½œç”¨ï¼Œå…¶å®æ˜¯æœ‰åŒºåˆ«çš„ï¼Œä¸èƒ½æ··ä¸ºä¸€è°ˆã€‚

*   `åˆ†åº“`ï¼šæ˜¯ä¸ºäº†è§£å†³æ•°æ®åº“è¿æ¥èµ„æºä¸è¶³é—®é¢˜ï¼Œå’Œç£ç›˜IOçš„æ€§èƒ½ç“¶é¢ˆé—®é¢˜ã€‚
*   `åˆ†è¡¨`ï¼šæ˜¯ä¸ºäº†è§£å†³å•è¡¨æ•°æ®é‡å¤ªå¤§ï¼Œsqlè¯­å¥æŸ¥è¯¢æ•°æ®æ—¶ï¼Œå³ä½¿èµ°äº†ç´¢å¼•ä¹Ÿéå¸¸è€—æ—¶é—®é¢˜ã€‚æ­¤å¤–è¿˜å¯ä»¥è§£å†³æ¶ˆè€—cpuèµ„æºé—®é¢˜ã€‚
*   `åˆ†åº“åˆ†è¡¨`ï¼šå¯ä»¥è§£å†³ æ•°æ®åº“è¿æ¥èµ„æºä¸è¶³ã€ç£ç›˜IOçš„æ€§èƒ½ç“¶é¢ˆã€æ£€ç´¢æ•°æ®è€—æ—¶ å’Œ æ¶ˆè€—cpuèµ„æºç­‰é—®é¢˜ã€‚

å¦‚æœåœ¨æœ‰äº›ä¸šåŠ¡åœºæ™¯ä¸­ï¼Œç”¨æˆ·å¹¶å‘é‡å¾ˆå¤§ï¼Œä½†æ˜¯éœ€è¦ä¿å­˜çš„æ•°æ®é‡å¾ˆå°‘ï¼Œè¿™æ—¶å¯ä»¥åªåˆ†åº“ï¼Œä¸åˆ†è¡¨ã€‚

å¦‚æœåœ¨æœ‰äº›ä¸šåŠ¡åœºæ™¯ä¸­ï¼Œç”¨æˆ·å¹¶å‘é‡ä¸å¤§ï¼Œä½†æ˜¯éœ€è¦ä¿å­˜çš„æ•°é‡å¾ˆå¤šï¼Œè¿™æ—¶å¯ä»¥åªåˆ†è¡¨ï¼Œä¸åˆ†åº“ã€‚

å¦‚æœåœ¨æœ‰äº›ä¸šåŠ¡åœºæ™¯ä¸­ï¼Œç”¨æˆ·å¹¶å‘é‡å¤§ï¼Œå¹¶ä¸”éœ€è¦ä¿å­˜çš„æ•°é‡ä¹Ÿå¾ˆå¤šæ—¶ï¼Œå¯ä»¥åˆ†åº“åˆ†è¡¨ã€‚


>è½¬è½½é“¾æ¥ï¼š[https://mp.weixin.qq.com/s/klkD8xea0gQ96Mh1Q1MHLw](https://mp.weixin.qq.com/s/klkD8xea0gQ96Mh1Q1MHLw)ï¼Œå‡ºå¤„ï¼šmacrozhengï¼Œæ•´ç†ï¼šmusk

----

  

 

  
